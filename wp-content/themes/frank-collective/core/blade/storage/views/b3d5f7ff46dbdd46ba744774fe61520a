<?php // /Users/aaronpedersen/Documents/Dev/wp-frank-collective-live/wp-content/themes/frank-collective/views/works-all.blade.php ?>
<?php /* Template Name: Work All */ ?>
<?php \Laravel\Section::start('content'); ?>
	<?php while ( have_posts() ) : the_post(); ?>
    <div class="root barba-container" data-namespace="archive" data-page-id="Archive" data-transition-in="archive_in" data-transition-out="archive_out" data-page-init="archive_init">
        <div class="main default-content">
            <div class="container">
                <div class="media-container" data-filter-work>
                    <div class="top-row">
                        <div data-appear-text>
                            <h1>All Work</h1>
                        </div>
                        <strong class="filter">
                            Filter by <a href="#" class="link-u" data-filter-work-select>All</a>
                            <a href="#" class="close"></a>
                        </strong>
                    </div>
                    <div class="filter-drop filter-drop-hidden" style="display: none" data-filter-work-drop>
                        <div class="grid">
                            <?php if(!empty(get_terms('industry'))): ?>
                                <div class="col-xs-6 col" data-filter-type="industry">
                                    <h5>Industry</h5>
                                    <ul class="filter-list">
                                    <?php foreach(get_terms('industry') as $term): ?>
                                        <li><a href="#" data-filter-type="industry" data-filter-val="<?php echo $term->slug ; ?>"><?php echo  $term->name ; ?></a></li>
                                    <?php endforeach; ?>
                                    </ul>
                                </div>
                            <?php endif; ?>
                            <?php if(!empty(get_terms('service'))): ?>
                                <div class="col-xs-6 col" data-filter-type="service">
                                    <h5>Service</h5>
                                    <ul class="filter-list">
                                        <?php foreach(get_terms('service') as $term): ?>
                                            <li><a href="#" data-filter-type="service" data-filter-val="<?php echo $term->slug ; ?>"><?php echo  $term->name ; ?></a></li>
                                        <?php endforeach; ?>
                                    </ul>
                                </div>
                            <?php endif; ?>
                        </div>
                    </div>
                    <?php
                    $args = array(
                        'post_type' => ['work'],
                        'post_status' => ['publish'],
                        'orderby' => 'menu_order',
                        'order' => 'ASC',
                        'posts_per_page' => 20,
                        'has_password' => false,
                    );
                    $postIndex = 0;
                    $query_works = new WP_Query( $args );
                    ?>
                    <?php if($query_works->have_posts()): ?>
                        <div class="media-group works-all" data-load-more-list="work" data-filter-works-list>
                            <?php
                            while ( $query_works->have_posts() ) : $query_works->the_post();
                            ?>
                                <div data-link="<?php echo  get_permalink() ; ?>" class="media grid-flex work-item ajax-load" data-appear-block data-row-index="<?php echo  $postIndex ; ?>">
                                    <div class="col-sm-3">
	                                    <?php $image = get_field('thumbnail_image') ? get_field('thumbnail_image') : get_field('main_image') ?>
	                                    <?php $case_image = get_field('hero_section_image') ? get_field('hero_section_image') : get_field('main_image') ?>
                                        <div class="img-box" data-image="<?php echo  helper::imageURL($case_image, 'full') ; ?>">
                                            <?php echo  helper::imageDiv($image, 'full', ['class' => 'inner-content']) ; ?>
                                        </div>
                                    </div>
                                    <div class="col-sm-9">
                                        <div class="text-content">
                                            <div class="grid-flex">
                                                <div class="col-sm-5 col-md-6 title-col">
                                                    <h3><?php echo  get_field('brand_name') ; ?></h3>
                                                </div>
                                                <?php
                                                $term_obj_list = get_the_terms( get_the_ID(), 'service' );
                                                ?>
                                                <?php if(!empty($term_obj_list)): ?>
                                                    <?php
                                                    $services = array_chunk($term_obj_list, 3);
                                                    ?>
                                                    <div class="col-sm-7 col-md-6">
                                                        <h6>What we did</h6>
                                                        <div class="dl">
                                                        <?php foreach($term_obj_list as $item): ?>
                                                            <span class="dt"><?php echo  $item->name ; ?></span>
                                                        <?php endforeach; ?>
                                                        </div>
                                                    </div>
                                                <?php endif; ?>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            <?php $postIndex ++ ?>
                            <?php endwhile; wp_reset_postdata(); ?>
                        </div>
                    <?php endif; ?>
                    <div class="full-btn" data-loadmore-works>
                        <div class="grid">
                            <div class="col-sm-6 col-sm-offset-3" data-appear-text>
                                <a href="#" class="link-more" data-load-more="work">View More Work</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <?php echo view('partials/cta/contact')->with(get_defined_vars())->render(); ?>
    </div>
	<?php endwhile; ?>
<?php \Laravel\Section::stop(); ?>
<?php echo view('layouts/master')->with(get_defined_vars())->render(); ?>